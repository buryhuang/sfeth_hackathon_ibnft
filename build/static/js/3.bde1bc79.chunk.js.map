{"version":3,"sources":["../node_modules/tezos-sdk-module/dist/common/base.js","../node_modules/tezos-sdk-module/dist/providers/beacon/beacon_provider.js"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__read","o","m","r","ar","error","__spreadArray","to","from","pack","l","Array","slice","concat","defineProperty","exports","op_to_kt1","pk_to_pkh","b58dec","b58enc","kt1_prefix","op_prefix","sig_prefix","p2sig_prefix","spsig1_prefix","edsig_prefix","p2sk_prefix","spsk_prefix","edsk_prefix","p2pk_prefix","sppk_prefix","edpk_prefix","tz3_prefix","tz2_prefix","tz1_prefix","sign","tezos_signed_message_prefix","of_hex","pack_string","to_hex","hex_to_uint8array","uint8array_to_hex","get_transaction","send_batch","send","storage","get_public_key","get_address","asset_of_json","asset_to_json","asset_type_of_json","asset_type_to_json","bignumber_js_1","require","node_fetch_1","_a","TextEncoder","TextDecoder","bs58check","blake","a","asset_class","assetClass","contract","tokenId","undefined","token_id","toString","default","Error","reduce","acc","x","padStart","Uint8Array","parseInt","substring","encode","payload","prefix","set","Buffer","buffer","enc","decode","assetType","asset_type","tezos","address","public_key","provider","arg","entrypoint","parameter","transfer","amount","Number","destination","args","params","map","batch","op_hash","config","api","ok","json","h","domain","Date","toISOString","message","type","edpk","pk","pkh_prefix","pk_prefix","pk_bytes","blake2b","hash","data","beacon_provider","beacon_sdk_1","taquito_1","base_1","wallet","tk","originate","balance","_this","setWalletProvider","opHash","confirmation","args2","kind","OpKind","TRANSACTION","bytes","signingType","SigningType","MICHELINE","client","requestSignPayload","signature","account","getActiveAccount","includes","publicKey","at","tz","getBalance","getPKH","chain_id","rpc","getChainId"],"mappings":"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","file":"static/js/3.bde1bc79.chunk.js","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.op_to_kt1 = exports.pk_to_pkh = exports.b58dec = exports.b58enc = exports.kt1_prefix = exports.op_prefix = exports.sig_prefix = exports.p2sig_prefix = exports.spsig1_prefix = exports.edsig_prefix = exports.p2sk_prefix = exports.spsk_prefix = exports.edsk_prefix = exports.p2pk_prefix = exports.sppk_prefix = exports.edpk_prefix = exports.tz3_prefix = exports.tz2_prefix = exports.tz1_prefix = exports.sign = exports.tezos_signed_message_prefix = exports.of_hex = exports.pack_string = exports.to_hex = exports.hex_to_uint8array = exports.uint8array_to_hex = exports.get_transaction = exports.send_batch = exports.send = exports.storage = exports.get_public_key = exports.get_address = exports.asset_of_json = exports.asset_to_json = exports.asset_type_of_json = exports.asset_type_to_json = void 0;\nvar bignumber_js_1 = require(\"bignumber.js\");\nvar node_fetch_1 = require(\"node-fetch\");\nvar _a = require(\"text-encoder\"), TextEncoder = _a.TextEncoder, TextDecoder = _a.TextDecoder;\nvar bs58check = require(\"bs58check\");\nvar blake = require('blakejs');\nfunction asset_type_to_json(a) {\n    switch (a.asset_class) {\n        case \"XTZ\":\n            return { assetClass: a.asset_class };\n        case \"FT\":\n            return { assetClass: a.asset_class, contract: a.contract,\n                tokenId: (a.token_id == undefined) ? undefined : a.token_id.toString() };\n        case \"NFT\":\n        case \"MT\":\n            return {\n                assetClass: a.asset_class,\n                contract: a.contract,\n                tokenId: a.token_id.toString()\n            };\n    }\n}\nexports.asset_type_to_json = asset_type_to_json;\nfunction asset_type_of_json(a) {\n    switch (a.assetClass) {\n        case \"XTZ\":\n            return { asset_class: a.assetClass };\n        case \"FT\":\n            return { asset_class: a.assetClass, contract: a.contract,\n                token_id: (a.tokenId == undefined) ? undefined : new bignumber_js_1.default(a.tokenId) };\n        case \"NFT\":\n        case \"MT\":\n            return {\n                asset_class: a.assetClass,\n                contract: a.contract,\n                token_id: new bignumber_js_1.default(a.tokenId)\n            };\n        default: throw new Error(\"Unknown Asset Class\");\n    }\n}\nexports.asset_type_of_json = asset_type_of_json;\nfunction asset_to_json(a) {\n    return {\n        assetType: asset_type_to_json(a.asset_type),\n        value: a.value.toString()\n    };\n}\nexports.asset_to_json = asset_to_json;\nfunction asset_of_json(a) {\n    return {\n        asset_type: asset_type_of_json(a.assetType),\n        value: new bignumber_js_1.default(a.value)\n    };\n}\nexports.asset_of_json = asset_of_json;\nfunction get_address(p) {\n    return p.tezos.address();\n}\nexports.get_address = get_address;\nfunction get_public_key(p) {\n    return p.tezos.public_key();\n}\nexports.get_public_key = get_public_key;\nfunction storage(p, contract) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, p.tezos.storage(contract)];\n        });\n    });\n}\nexports.storage = storage;\nfunction send(provider, arg) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (arg.entrypoint && arg.parameter) {\n                return [2 /*return*/, provider.tezos.transfer({\n                        amount: (arg.amount != undefined) ? Number(arg.amount) : 0,\n                        to: arg.destination,\n                        parameter: { entrypoint: arg.entrypoint, value: arg.parameter }\n                    })];\n            }\n            else {\n                return [2 /*return*/, provider.tezos.transfer({\n                        amount: (arg.amount != undefined) ? Number(arg.amount) : 0,\n                        to: arg.destination\n                    })];\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nexports.send = send;\nfunction send_batch(provider, args) {\n    return __awaiter(this, void 0, void 0, function () {\n        var params;\n        return __generator(this, function (_a) {\n            params = args.map(function (p) {\n                if (p.entrypoint && p.parameter) {\n                    return {\n                        amount: (p.amount != undefined) ? Number(p.amount) : 0,\n                        to: p.destination,\n                        parameter: { entrypoint: p.entrypoint, value: p.parameter }\n                    };\n                }\n                else {\n                    return {\n                        amount: (p.amount != undefined) ? Number(p.amount) : 0,\n                        to: p.destination,\n                    };\n                }\n            });\n            return [2 /*return*/, provider.tezos.batch(params)];\n        });\n    });\n}\nexports.send_batch = send_batch;\nfunction get_transaction(provider, op_hash) {\n    return __awaiter(this, void 0, void 0, function () {\n        var r;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, (0, node_fetch_1.default)(provider.config.api + '/transaction/' + op_hash)];\n                case 1:\n                    r = _a.sent();\n                    if (r.ok) {\n                        return [2 /*return*/, r.json()];\n                    }\n                    else\n                        throw new Error(\"/transaction/\" + op_hash + \" failed\");\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.get_transaction = get_transaction;\nfunction uint8array_to_hex(a) {\n    return a.reduce(function (acc, x) { return acc + x.toString(16).padStart(2, '0'); }, '');\n}\nexports.uint8array_to_hex = uint8array_to_hex;\nfunction hex_to_uint8array(s) {\n    var a = new Uint8Array(s.length / 2);\n    for (var i = 0; i < s.length; i += 2) {\n        a[i / 2] = parseInt(s.substring(i, i + 2), 16);\n    }\n    return a;\n}\nexports.hex_to_uint8array = hex_to_uint8array;\nfunction to_hex(s) {\n    var encoder = new TextEncoder();\n    var a = encoder.encode(s);\n    return uint8array_to_hex(a);\n}\nexports.to_hex = to_hex;\nfunction pack_string(s) {\n    var h = to_hex(s);\n    return '0501' + Number(h.length / 2).toString(16).padStart(8, '0') + h;\n}\nexports.pack_string = pack_string;\nfunction of_hex(s) {\n    var a = hex_to_uint8array(s);\n    var decoder = new TextDecoder();\n    return decoder.decode(a);\n}\nexports.of_hex = of_hex;\nfunction tezos_signed_message_prefix(domain) {\n    if (domain === void 0) { domain = \"rarible.com\"; }\n    var date = new Date();\n    return \"Tezos Signed Message: \" + domain + \" \" + date.toISOString() + \" \";\n}\nexports.tezos_signed_message_prefix = tezos_signed_message_prefix;\nfunction sign(p, message, type) {\n    return __awaiter(this, void 0, void 0, function () {\n        var edpk, r;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    type = type || \"message\";\n                    return [4 /*yield*/, p.public_key()];\n                case 1:\n                    edpk = _a.sent();\n                    if (edpk == undefined)\n                        throw new Error(\"cannot get public key from provider\");\n                    return [4 /*yield*/, p.sign(message, type)];\n                case 2:\n                    r = _a.sent();\n                    return [2 /*return*/, __assign({ edpk: edpk }, r)];\n            }\n        });\n    });\n}\nexports.sign = sign;\nexports.tz1_prefix = new Uint8Array([6, 161, 159]);\nexports.tz2_prefix = new Uint8Array([6, 161, 161]);\nexports.tz3_prefix = new Uint8Array([6, 161, 164]);\nexports.edpk_prefix = new Uint8Array([13, 15, 37, 217]);\nexports.sppk_prefix = new Uint8Array([3, 254, 226, 86]);\nexports.p2pk_prefix = new Uint8Array([3, 178, 139, 127]);\nexports.edsk_prefix = new Uint8Array([13, 15, 58, 7]);\nexports.spsk_prefix = new Uint8Array([17, 162, 224, 201]);\nexports.p2sk_prefix = new Uint8Array([16, 81, 238, 189]);\nexports.edsig_prefix = new Uint8Array([9, 245, 205, 134, 18]);\nexports.spsig1_prefix = new Uint8Array([13, 115, 101, 19, 63]);\nexports.p2sig_prefix = new Uint8Array([54, 240, 44, 52]);\nexports.sig_prefix = new Uint8Array([4, 130, 43]);\nexports.op_prefix = new Uint8Array([5, 116]);\nexports.kt1_prefix = new Uint8Array([2, 90, 121]);\nfunction b58enc(payload, prefix) {\n    var n = new Uint8Array(prefix.length + payload.length);\n    n.set(prefix);\n    n.set(payload, prefix.length);\n    return bs58check.encode(Buffer.from(n.buffer));\n}\nexports.b58enc = b58enc;\nfunction b58dec(enc, prefix) {\n    return bs58check.decode(enc).slice(prefix.length);\n}\nexports.b58dec = b58dec;\nfunction pk_to_pkh(pk) {\n    var pkh_prefix;\n    var pk_prefix;\n    switch (pk.substring(0, 2)) {\n        case 'ed':\n            pkh_prefix = exports.tz1_prefix;\n            pk_prefix = exports.edpk_prefix;\n            break;\n        case 'sp':\n            pkh_prefix = exports.tz2_prefix;\n            pk_prefix = exports.sppk_prefix;\n            break;\n        case 'p2':\n            pkh_prefix = exports.tz3_prefix;\n            pk_prefix = exports.p2pk_prefix;\n            break;\n        default: throw new Error(\"don't handle base58 key \" + pk);\n    }\n    var pk_bytes = b58dec(pk, pk_prefix);\n    var hash = blake.blake2b(pk_bytes, null, 20);\n    return b58enc(hash, pkh_prefix);\n}\nexports.pk_to_pkh = pk_to_pkh;\nfunction op_to_kt1(hash) {\n    var op = b58dec(hash, exports.op_prefix);\n    var data = new Uint8Array(__spreadArray(__spreadArray([], __read(op), false), [0, 0, 0, 0], false));\n    var hash_kt1 = blake.blake2b(data, null, 20);\n    return b58enc(hash_kt1, exports.kt1_prefix);\n}\nexports.op_to_kt1 = op_to_kt1;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.beacon_provider = void 0;\nvar beacon_sdk_1 = require(\"@airgap/beacon-sdk\");\nvar taquito_1 = require(\"@taquito/taquito\");\nvar base_1 = require(\"../../common/base\");\nfunction beacon_provider(wallet, tk) {\n    return __awaiter(this, void 0, void 0, function () {\n        var transfer, originate, batch, sign, address, public_key, storage, balance, chain_id;\n        var _this = this;\n        return __generator(this, function (_a) {\n            tk.setWalletProvider(wallet);\n            transfer = function (arg) { return __awaiter(_this, void 0, void 0, function () {\n                var op;\n                var _this = this;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, tk.wallet.transfer(arg).send()];\n                        case 1:\n                            op = _a.sent();\n                            return [2 /*return*/, { hash: op.opHash, confirmation: function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n                                        switch (_a.label) {\n                                            case 0: return [4 /*yield*/, op.confirmation()];\n                                            case 1:\n                                                _a.sent();\n                                                return [2 /*return*/];\n                                        }\n                                    }); }); } }];\n                    }\n                });\n            }); };\n            originate = function (arg) { return __awaiter(_this, void 0, void 0, function () {\n                var op;\n                var _this = this;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, tk.wallet.originate(arg).send()];\n                        case 1:\n                            op = _a.sent();\n                            return [2 /*return*/, {\n                                    hash: op.opHash,\n                                    contract: (0, base_1.op_to_kt1)(op.opHash),\n                                    confirmation: function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n                                        switch (_a.label) {\n                                            case 0: return [4 /*yield*/, op.confirmation()];\n                                            case 1:\n                                                _a.sent();\n                                                return [2 /*return*/];\n                                        }\n                                    }); }); }\n                                }];\n                    }\n                });\n            }); };\n            batch = function (args) { return __awaiter(_this, void 0, void 0, function () {\n                var args2, op;\n                var _this = this;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            args2 = args.map(function (a) {\n                                return __assign(__assign({}, a), { kind: taquito_1.OpKind.TRANSACTION });\n                            });\n                            return [4 /*yield*/, tk.wallet.batch(args2).send()];\n                        case 1:\n                            op = _a.sent();\n                            return [2 /*return*/, { hash: op.opHash, confirmation: function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n                                        switch (_a.label) {\n                                            case 0: return [4 /*yield*/, op.confirmation()];\n                                            case 1:\n                                                _a.sent();\n                                                return [2 /*return*/];\n                                        }\n                                    }); }); } }];\n                    }\n                });\n            }); };\n            sign = function (bytes, type) { return __awaiter(_this, void 0, void 0, function () {\n                var signingType, prefix, payload, signature;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            signingType = beacon_sdk_1.SigningType.MICHELINE;\n                            prefix = '';\n                            payload = bytes;\n                            if (type == 'message') {\n                                prefix = (0, base_1.tezos_signed_message_prefix)();\n                                payload = (0, base_1.pack_string)(prefix + bytes);\n                            }\n                            return [4 /*yield*/, wallet.client.requestSignPayload({ signingType: signingType, payload: payload })];\n                        case 1:\n                            signature = (_a.sent()).signature;\n                            return [2 /*return*/, { signature: signature, prefix: prefix }];\n                    }\n                });\n            }); };\n            address = function () { return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, wallet.getPKH()];\n                });\n            }); };\n            public_key = function () { return __awaiter(_this, void 0, void 0, function () {\n                var account;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, wallet.client.getActiveAccount()];\n                        case 1:\n                            account = _a.sent();\n                            if (account) {\n                                if (['edpk', 'sppk', 'p2pk'].includes(account.publicKey.substring(0, 4)))\n                                    return [2 /*return*/, account.publicKey];\n                                else\n                                    return [2 /*return*/, (0, base_1.b58enc)((0, base_1.hex_to_uint8array)(account.publicKey), base_1.edpk_prefix)];\n                            }\n                            else\n                                return [2 /*return*/, undefined];\n                            return [2 /*return*/];\n                    }\n                });\n            }); };\n            storage = function (contract) { return __awaiter(_this, void 0, void 0, function () {\n                var c;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, tk.wallet.at(contract)];\n                        case 1:\n                            c = _a.sent();\n                            return [2 /*return*/, c.storage()];\n                    }\n                });\n            }); };\n            balance = function () { return __awaiter(_this, void 0, void 0, function () {\n                var a;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, address()];\n                        case 1:\n                            a = _a.sent();\n                            return [2 /*return*/, tk.tz.getBalance(a)];\n                    }\n                });\n            }); };\n            chain_id = function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n                return [2 /*return*/, tk.rpc.getChainId()];\n            }); }); };\n            return [2 /*return*/, {\n                    kind: \"beacon\",\n                    transfer: transfer,\n                    originate: originate,\n                    batch: batch,\n                    sign: sign,\n                    address: address,\n                    public_key: public_key,\n                    storage: storage,\n                    balance: balance,\n                    chain_id: chain_id,\n                    tk: tk,\n                }];\n        });\n    });\n}\nexports.beacon_provider = beacon_provider;\n"],"sourceRoot":""}